/*
 * therm_temperature_lookup.c
 *
 *  Created on: Nov 7, 2023
 *      Author: Jesse Haynie
 */
#include "therm_temperature_lookup.h"

uint16_t look_up_temperature[2][111] = {
    {263, 264, 265, 266, 267, 268, 269, 270, 271, 272,
     273, 274, 275, 276, 277, 278, 279, 280, 281, 282,
     283, 284, 285, 286, 287, 288, 289, 290, 291, 292,
     293, 294, 295, 296, 297, 298, 299, 300, 301, 302,
     303, 304, 305, 306, 307, 308, 309, 310, 311, 312,
     313, 314, 315, 316, 317, 318, 319, 320, 321, 322,
     323, 324, 325, 326, 327, 328, 329, 330, 331, 332,
     333, 334, 335, 336, 337, 338, 339, 340, 341, 342,
     343, 344, 345, 346, 347, 348, 349, 350, 351, 352,
     353, 354, 355, 356, 357, 358, 359, 360, 361, 362,
     363, 364, 365, 366, 367, 368, 369, 370, 371, 372,
     373},
    {3369, 3339, 3308, 3277, 3244, 3212, 3178, 3144, 3109, 3074,
     3038, 3002, 2965, 2927, 2889, 2851, 2812, 2773, 2734, 2694,
     2654, 2614, 2574, 2533, 2493, 2452, 2411, 2370, 2330, 2289,
     2248, 2208, 2167, 2127, 2087, 2048, 2008, 1969, 1930, 1891,
     1853, 1816, 1778, 1741, 1705, 1669, 1633, 1598, 1563, 1529,
     1496, 1463, 1430, 1398, 1367, 1336, 1306, 1276, 1247, 1218,
     1190, 1163, 1136, 1109, 1083, 1058, 1033, 1009, 985, 962,
     939, 917, 895, 874, 854, 833, 814, 794, 776, 757, 739,
     722, 705, 688, 672, 656, 641, 625, 611, 596, 583, 569,
     556, 543, 530, 518, 506, 494, 483, 472, 461, 450, 440,
     430, 420, 411, 402, 393, 384, 375, 367}
};

uint16_t binary_search(uint16_t adc_target)
{
	uint16_t start = 0;
	uint16_t end = 110;
	uint16_t mid = start + (end - start) / 2;

	while(start <= end)
	{
		if(look_up_temperature[1][mid] == adc_target)
		{
			return look_up_temperature[0][mid];
		}
		else if(adc_target < look_up_temperature[1][mid])
		{
			start = mid + 1;
		}
		else
		{
			end = mid - 1;
		}
		mid = start + (end - start) / 2;
	}
	return look_up_temperature[0][mid];
}
